<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NaamJap Counter</title>

<style>
:root {
  --bg: #fff3e0;
  --card: #ffffff;
  --accent: #ff9800;
  --text: #4e342e;
}

body {
  margin: 0;
  font-family: Georgia, serif;
  background: var(--bg);
  color: var(--text);
}

header {
  text-align: center;
  padding: 14px;
  font-size: 22px;
  font-weight: bold;
}

.page {
  display: none;
  padding: 12px;
  padding-bottom: 70px;
}

.page.active {
  display: block;
}

.card {
  background: var(--card);
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  cursor: pointer;
}

.card-title {
  font-size: 18px;
  font-weight: bold;
}

.card-count {
  font-size: 14px;
  margin-top: 6px;
}

.mantra {
  text-align: center;
  font-size: 22px;
  line-height: 1.6;
  margin-top: 20px;
}

.tap-area {
  margin: 30px 0;
  height: 40vh;
  background: #ffe0b2;
  border-radius: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  user-select: none;
}

.footer {
  text-align: center;
  font-size: 16px;
}

/* Bottom Nav */
.nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 56px;
  background: white;
  display: flex;
  border-top: 1px solid #ccc;
}

.nav button {
  flex: 1;
  border: none;
  background: none;
  font-size: 14px;
  color: var(--text);
}

.nav button.active {
  color: var(--accent);
  font-weight: bold;
}

table {
  width: 100%;
  border-collapse: collapse;
  background: white;
}

th, td {
  padding: 8px;
  border-bottom: 1px solid #ddd;
  font-size: 14px;
}

select {
  width: 100%;
  padding: 10px;
  font-size: 16px;
}
</style>
</head>

<body>

<header id="title"></header>

<div id="home" class="page active"></div>

<div id="chant" class="page">
  <div class="mantra" id="mantraText"></div>
  <div class="tap-area" onclick="increment()">Tap here üôè</div>
  <div class="footer">
    <span id="todayLabel"></span>: <b id="todayCount">0</b> |
    <span id="lifeLabel"></span>: <b id="lifeCount">0</b>
  </div>
</div>

<div id="analytics" class="page">
  <table>
    <thead>
      <tr>
        <th id="dateLabel"></th>
        <th id="naamLabel"></th>
        <th id="countLabel"></th>
      </tr>
    </thead>
    <tbody id="analyticsBody"></tbody>
  </table>
</div>

<div id="settings" class="page">
  <label id="langLabel"></label>
  <select onchange="changeLang(this.value)">
    <option value="en">English</option>
    <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
    <option value="or">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü</option>
  </select>
</div>

<div class="nav">
  <button id="btnHome" class="active" onclick="showPage('home', this)">Home</button>
  <button onclick="showPage('analytics', this)">Analytics</button>
  <button onclick="showPage('settings', this)">Settings</button>
</div>

<script>
const TEXT = {
  en: { title:"NaamJap Counter", today:"Today", life:"Lifetime", date:"Date", naam:"Naam", count:"Count", lang:"Language" },
  mr: { title:"‡§®‡§æ‡§Æ‡§ú‡§™ ‡§ï‡§æ‡§â‡§Ç‡§ü‡§∞", today:"‡§Ü‡§ú", life:"‡§è‡§ï‡•Ç‡§£", date:"‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï", naam:"‡§®‡§æ‡§Æ", count:"‡§Æ‡•ã‡§ú‡§£‡•Ä", lang:"‡§≠‡§æ‡§∑‡§æ" },
  or: { title:"‡¨®‡¨æ‡¨Æ‡¨ú‡¨™ ‡¨ï‡¨æ‡¨â‡¨£‡≠ç‡¨ü‡¨∞", today:"‡¨Ü‡¨ú‡¨ø", life:"‡¨Æ‡≠ã‡¨ü", date:"‡¨§‡¨æ‡¨∞‡¨ø‡¨ñ", naam:"‡¨®‡¨æ‡¨Æ", count:"‡¨ó‡¨£‡¨®‡¨æ", lang:"‡¨≠‡¨æ‡¨∑‡¨æ" }
};

const NAAMS = [
  { name:"Radha Naam", mantra:"Radha Radha Radha" },
  { name:"Krishna Naam", mantra:"Krishna Krishna Krishna" },
  { name:"Ram Naam", mantra:"Ram Ram Ram" },
  { name:"Hare Krishna Mahamantra",
    mantra:`Hare Krishna Hare Krishna
Krishna Krishna Hare Hare
Hare Ram Hare Ram
Ram Ram Hare Hare`
  }
];

let currentNaam = null;

const $ = id => document.getElementById(id);

function todayKey() {
  return new Date().toISOString().slice(0,10);
}

function getLang() {
  return localStorage.getItem("lang") || "en";
}

function getData() {
  return JSON.parse(localStorage.getItem("data") || "{}");
}

function saveData(d) {
  localStorage.setItem("data", JSON.stringify(d));
}

function applyLang() {
  const t = TEXT[getLang()];
  $("title").innerText = t.title;
  $("todayLabel").innerText = t.today;
  $("lifeLabel").innerText = t.life;
  $("dateLabel").innerText = t.date;
  $("naamLabel").innerText = t.naam;
  $("countLabel").innerText = t.count;
  $("langLabel").innerText = t.lang;
}

function loadHome() {
  const home = $("home");
  home.innerHTML = "";
  const d = getData();

  NAAMS.forEach(n => {
    if (!d[n.name]) d[n.name] = { life:0, daily:{} };
    const today = d[n.name].daily[todayKey()] || 0;

    const c = document.createElement("div");
    c.className = "card";
    c.innerHTML = `
      <div class="card-title">${n.name}</div>
      <div class="card-count">
        ${TEXT[getLang()].today}: ${today} |
        ${TEXT[getLang()].life}: ${d[n.name].life}
      </div>`;
    c.onclick = () => openChant(n);
    home.appendChild(c);
  });

  saveData(d);
}

function openChant(n) {
  currentNaam = n;
  showPage("chant");
  $("mantraText").innerText = n.mantra;
  updateCounts();
}

function increment() {
  const d = getData();
  const n = currentNaam.name;
  d[n].life++;
  d[n].daily[todayKey()] = (d[n].daily[todayKey()] || 0) + 1;
  saveData(d);
  updateCounts();
}

function updateCounts() {
  const d = getData();
  $("todayCount").innerText = d[currentNaam.name].daily[todayKey()] || 0;
  $("lifeCount").innerText = d[currentNaam.name].life;
}

function loadAnalytics() {
  const body = $("analyticsBody");
  body.innerHTML = "";
  const d = getData();

  Object.keys(d).forEach(n =>
    Object.keys(d[n].daily).forEach(date => {
      const tr = document.createElement("tr");
      tr.innerHTML = `<td>${date}</td><td>${n}</td><td>${d[n].daily[date]}</td>`;
      body.appendChild(tr);
    })
  );
}

function showPage(p, btn) {
  document.querySelectorAll(".page").forEach(x => x.classList.remove("active"));
  $(p).classList.add("active");

  document.querySelectorAll(".nav button").forEach(b => b.classList.remove("active"));
  if (btn) btn.classList.add("active");

  if (p === "analytics") loadAnalytics();
  if (p === "home") loadHome();
}

function changeLang(l) {
  localStorage.setItem("lang", l);
  applyLang();
  loadHome();
}

applyLang();
loadHome();
</script>

</body>
</html>
